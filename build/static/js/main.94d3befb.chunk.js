(this["webpackJsonpsalamantex-coding-challenge-client"]=this["webpackJsonpsalamantex-coding-challenge-client"]||[]).push([[0],{123:function(e,a,n){e.exports=n(144)},127:function(e,a,n){},128:function(e,a,n){},144:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),c=n(12),l=n.n(c),i=(n(127),n(29)),o=(n(128),n(111)),m=n(26),u=n(14),s=n(181),d=n(96),E=n(182),g=n(89),p=n(183),f=n(13),h=n.n(f),b=n(27);function v(){var e=Object(u.a)(["\n    query transactions {\n  transactions {\n    id\n    amount\n    currency {\n      name\n    }\n    createdAt\n    processedAt\n    target {\n      name\n    }\n    source {\n      name\n    }\n    state\n    error\n  }\n}\n    "]);return v=function(){return e},e}function y(){var e=Object(u.a)(["\n    query otherUsers {\n  otherUsers {\n    id\n    name\n  }\n}\n    "]);return y=function(){return e},e}function j(){var e=Object(u.a)(["\n    mutation submitTransaction($data: SubmitTransactionInput!) {\n  submitTransaction(data: $data) {\n    id\n  }\n}\n    "]);return j=function(){return e},e}function O(){var e=Object(u.a)(["\n    mutation register($data: RegisterInput!) {\n  register(data: $data) {\n    token\n    user {\n      id\n      name\n    }\n  }\n}\n    "]);return O=function(){return e},e}function A(){var e=Object(u.a)(["\n    mutation login($email: String!, $password: String!) {\n  login(email: $email, password: $password) {\n    token\n    user {\n      id\n      name\n    }\n  }\n}\n    "]);return A=function(){return e},e}function x(){var e=Object(u.a)(["\n    query currencyAccounts {\n  me {\n    currencyAccounts {\n      id\n      balance\n      walletId\n      currency {\n        name\n        exchangeRateDollar\n      }\n    }\n  }\n}\n    "]);return x=function(){return e},e}function w(){var e=Object(u.a)(["\n    mutation addCurrencyAccount($data: CurrencyAccountInput!) {\n  addCurrencyAccount(data: $data) {\n    id\n  }\n}\n    "]);return w=function(){return e},e}function S(){var e=Object(u.a)(["\n    query currencies {\n  currencies {\n    id\n    name\n    exchangeRateDollar\n  }\n}\n    "]);return S=function(){return e},e}function N(){var e=Object(u.a)(["\n    query me {\n  me {\n    id\n    name\n    email\n    maxAmountPerTransactionDollar\n    description\n  }\n}\n    "]);return N=function(){return e},e}var W=h()(N());var I=h()(S());var $=h()(w());var T=h()(x());function k(e){return b.c(T,e)}var C=h()(A());var D=h()(O());var q=h()(j());var B=h()(y());var R=h()(v());var L=n(24),U="local_user";function P(e){localStorage.setItem(U,JSON.stringify(e))}function M(){var e=localStorage.getItem(U);return e?JSON.parse(e):null}function z(){localStorage.removeItem(U)}var J=function(e){var a=e.children;return M()?r.a.createElement(L.a,{to:"me/account"}):r.a.createElement("div",null,a)},V=n(31),Q=n(197),Y=function(e){return r.a.createElement(V.a,Object.assign({},e,{render:function(a){return r.a.createElement("div",null,r.a.createElement(Q.a,Object.assign({},a.field,e)),a.form.errors[a.field.name]&&a.form.touched[a.field.name]&&a.field.value&&a.field.value.length>0&&r.a.createElement("div",{style:{color:"red"}},a.form.errors[a.field.name]))}}))};function G(){var e=Object(u.a)([" mutation login($email: String!, $password: String!) {\n        login(email: $email, password: $password) {\n            token,\n            user {\n                id,\n                name\n            }\n        }\n    }  \n    "]);return G=function(){return e},e}var H=Object(d.a)({root:{marginTop:100},paper:{padding:20},orRegisterButton:{textDecoration:"none",color:"#005ff8"}}),_=function(){var e=H();h()(G());var a,n=b.b(C,a),t=Object(i.a)(n,2),c=t[0],l=t[1];return l.data&&P(l.data.login),r.a.createElement(J,null,r.a.createElement(s.a,{className:e.root,maxWidth:"md"},r.a.createElement(E.a,{container:!0,justify:"center"},r.a.createElement(E.a,{item:!0,md:6},r.a.createElement(g.a,{className:e.paper},r.a.createElement("h3",null,"Login"),r.a.createElement("span",null,"or",r.a.createElement("a",{href:"/register",className:e.orRegisterButton}," create a new account")),r.a.createElement(V.c,{onSubmit:function(e){return c({variables:e})},initialValues:{email:"",password:""},render:function(e){return r.a.createElement(V.b,null,r.a.createElement(Y,{label:"E-Mail",name:"email",margin:"normal",type:"email",fullWidth:!0}),r.a.createElement(Y,{label:"Password",name:"password",margin:"normal",type:"password",fullWidth:!0}),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(p.a,{variant:"contained",color:"primary",type:"submit"},"Login")))}}))))))},F=n(66),K=n(195),X=n(67),Z=Object(X.a)({overrides:{MuiButton:{root:{fontWeight:"bold",margin:"10px","&:hover":{}}}}}),ee=n(193),ae=n(194),ne=n(191),te=n(184),re=n(185),ce=n(186),le=n(187),ie=n(188);function oe(){var e=Object(u.a)([" query me {\n        me {\n            id,\n            name,\n            email,\n            maxAmountPerTransactionDollar,\n            description\n        }\n    }"]);return oe=function(){return e},e}var me=Object(d.a)({table:{width:"40%",marginLeft:"30%"}}),ue=function(){var e=me();h()(oe());var a,n=b.c(W,a).data;return r.a.createElement("main",null,r.a.createElement("h3",null,"Your Account"),r.a.createElement("div",null,n&&r.a.createElement(te.a,{className:e.table,component:g.a},r.a.createElement(re.a,{"aria-label":"simple table"},r.a.createElement(ce.a,null,r.a.createElement(le.a,null,r.a.createElement(ie.a,{component:"th",scope:"row"},"Name"),r.a.createElement(ie.a,{align:"right"},n.me.name)),r.a.createElement(le.a,null,r.a.createElement(ie.a,{component:"th",scope:"row"},"E-Mail"),r.a.createElement(ie.a,{align:"right"},n.me.email)),r.a.createElement(le.a,null,r.a.createElement(ie.a,{component:"th",scope:"row"},"Description"),r.a.createElement(ie.a,{align:"right"},n.me.description)),r.a.createElement(le.a,null,r.a.createElement(ie.a,{component:"th",scope:"row"},"Max amount per transaction ($)"),r.a.createElement(ie.a,{align:"right"},n.me.maxAmountPerTransactionDollar)))))))},se=n(189),de=n(190);function Ee(){var e=Object(u.a)([" query currencyAccounts {\n        me {\n            currencyAccounts {\n                id,\n                balance,\n                walletId,\n                currency {\n                    name,\n                    exchangeRateDollar\n                }\n            }\n        }\n    }"]);return Ee=function(){return e},e}var ge=Object(d.a)({card:{marginTop:"10px",minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),pe=function(){var e=ge();h()(Ee());var a=k().data;return r.a.createElement(s.a,{maxWidth:"md"},r.a.createElement(E.a,{container:!0,justify:"center"},r.a.createElement(E.a,{item:!0,md:8},r.a.createElement("h3",null,"Your Currency Accounts"),r.a.createElement("div",null,a&&a.me.currencyAccounts.map((function(a){return r.a.createElement(se.a,{className:e.card,variant:"outlined"},r.a.createElement(de.a,null,r.a.createElement(ne.a,{variant:"h5",component:"h2"},a.currency.name),r.a.createElement(ne.a,{className:e.title,color:"textSecondary",gutterBottom:!0},a.walletId),r.a.createElement(ne.a,{className:e.pos,color:"textSecondary"},a.balance," coins")))})),r.a.createElement(p.a,{variant:"contained",color:"primary",component:"a",href:"currencyAccounts/add"},"Add Currency Account")))))},fe=n(112),he=n(199),be=n(196),ve=n(200),ye=n(179);function je(){var e=Object(u.a)([" mutation addCurrencyAccount($data: CurrencyAccountInput!) {\n        addCurrencyAccount(data: $data) {\n            id\n        }\n    }"]);return je=function(){return e},e}function Oe(){var e=Object(u.a)([" query currencies {\n        currencies {\n            id,\n            name,\n            exchangeRateDollar\n        }\n    }"]);return Oe=function(){return e},e}var Ae=Object(d.a)({paper:{padding:20}}),xe=function(){var e=Ae();h()(Oe()),h()(je());var a,n=b.c(I,a).data,c=function(e){return b.b($,e)}(),l=Object(i.a)(c,2),o=l[0],m=l[1].data,u=Object(t.useState)(""),d=Object(i.a)(u,2),f=d[0],v=d[1];return m?r.a.createElement(L.a,{to:"/me/currencyAccounts"}):r.a.createElement(s.a,{maxWidth:"md"},r.a.createElement("h3",null,"Add Currency Account"),r.a.createElement(E.a,{container:!0,justify:"center"},r.a.createElement(E.a,{item:!0,md:6},r.a.createElement(g.a,{className:e.paper},n&&r.a.createElement(V.c,{onSubmit:function(e){o({variables:{data:Object(fe.a)({},e,{currencyName:f})}})},initialValues:{walletId:"",balance:0},render:function(){return r.a.createElement(V.b,null,r.a.createElement(Y,{label:"WalletId",name:"walletId",margin:"normal",fullWidth:!0}),r.a.createElement(Y,{label:"Balance",name:"balance",margin:"normal",type:"number",fullWidth:!0}),r.a.createElement(ye.a,{fullWidth:!0},r.a.createElement(he.a,null,"Currency"),r.a.createElement(be.a,{labelId:"select-label",id:"currencyName",value:f,name:"currencyName",onChange:function(e){return v(e.target.value)}},n.currencies.map((function(e){return r.a.createElement(ve.a,{value:e.name},e.name)})))),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(p.a,{variant:"contained",color:"primary",type:"submit"},"Add")))}})))))},we=n(192);function Se(){var e=Object(u.a)([" query transactions {\n        transactions{\n            id,\n            amount,\n            currency {\n                name\n            },\n            createdAt,\n            processedAt,\n            target {\n                name\n            },\n            source {\n                name\n            },\n            state,\n            error\n        }\n    }"]);return Se=function(){return e},e}var Ne=Object(d.a)({card:{marginTop:"10px",minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),We=function(){Ne();h()(Se());var e,a=b.c(R,e).data;return a&&console.log(a,null,3),r.a.createElement(s.a,null,r.a.createElement(E.a,{container:!0,justify:"center"},r.a.createElement(E.a,{item:!0,md:12},r.a.createElement("h3",null,"Your Transactions"),r.a.createElement("div",null,a&&r.a.createElement(te.a,{component:g.a},r.a.createElement(re.a,{"aria-label":"simple table"},r.a.createElement(we.a,null,r.a.createElement(le.a,null,r.a.createElement(ie.a,{align:"right"},"ID"),r.a.createElement(ie.a,{align:"right"},"Currency"),r.a.createElement(ie.a,{align:"right"},"Amount"),r.a.createElement(ie.a,{align:"right"},"Source"),r.a.createElement(ie.a,{align:"right"},"Target"),r.a.createElement(ie.a,{align:"right"},"Created at"),r.a.createElement(ie.a,{align:"right"},"Processed at"),r.a.createElement(ie.a,{align:"right"},"State"),r.a.createElement(ie.a,{align:"right"},"Error"))),r.a.createElement(ce.a,null,a.transactions.map((function(e){return r.a.createElement(le.a,{key:e.id},r.a.createElement(ie.a,{align:"right"},e.id),r.a.createElement(ie.a,{align:"right"},e.currency.name),r.a.createElement(ie.a,{align:"right"},e.amount),r.a.createElement(ie.a,{align:"right"},e.source.name),r.a.createElement(ie.a,{align:"right"},e.target.name),r.a.createElement(ie.a,{align:"right"},e.createdAt),r.a.createElement(ie.a,{align:"right"},e.processedAt),r.a.createElement(ie.a,{align:"right"},e.state),r.a.createElement(ie.a,{align:"right"},e.error))})))))),r.a.createElement(p.a,{variant:"contained",color:"primary",component:"a",href:"transactions/submit"},"Submit New Transaction"))))};function Ie(){var e=Object(u.a)([" query otherUsers {\n        otherUsers {\n            id,\n            name\n        }\n    }"]);return Ie=function(){return e},e}function $e(){var e=Object(u.a)([" mutation submitTransaction($data: SubmitTransactionInput!) {\n            submitTransaction(data: $data) {\n                id\n            }\n    }"]);return $e=function(){return e},e}var Te=Object(d.a)({paper:{padding:20}}),ke=function(){var e=Te();h()($e()),h()(Ie());var a,n=Object(t.useState)(""),c=Object(i.a)(n,2),l=c[0],o=c[1],m=Object(t.useState)(""),u=Object(i.a)(m,2),d=u[0],f=u[1],v=k().data,y=b.c(B,a).data,j=function(e){return b.b(q,e)}(),O=Object(i.a)(j,2),A=O[0];return O[1].data?r.a.createElement(L.a,{to:"/me/transactions"}):r.a.createElement(s.a,{maxWidth:"md"},r.a.createElement("h3",null,"Submit Transaction"),r.a.createElement(E.a,{container:!0,justify:"center"},r.a.createElement(E.a,{item:!0,md:6},r.a.createElement(g.a,{className:e.paper},v&&y&&r.a.createElement(V.c,{onSubmit:function(e){A({variables:{data:{amount:e.amount,currencyName:l,targetUserId:d}}})},initialValues:{amount:0},render:function(){return r.a.createElement(V.b,null,r.a.createElement(ye.a,{fullWidth:!0},r.a.createElement(he.a,null,"Currency"),r.a.createElement(be.a,{labelId:"select-label",id:"currencyName",value:l,name:"currencyName",onChange:function(e){return o(e.target.value)}},v.me.currencyAccounts.map((function(e){return r.a.createElement(ve.a,{value:e.currency.name},e.currency.name)})))),r.a.createElement(ye.a,{fullWidth:!0},r.a.createElement(he.a,null,"Target User"),r.a.createElement(be.a,{labelId:"targetUser",id:"targetUser",value:d,name:"targetUser",onChange:function(e){return f(e.target.value)}},y.otherUsers.map((function(e){return r.a.createElement(ve.a,{value:e.id},e.name)})))),r.a.createElement(Y,{label:"Amount",name:"amount",margin:"normal",type:"number",fullWidth:!0}),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(p.a,{variant:"contained",color:"primary",type:"submit"},"Add")))}})))))},Ce=Object(d.a)((function(e){return{root:{flexGrow:1},title:{marginRight:e.spacing(2)},menuItems:{marginLeft:"auto"}}}));function De(e){var a=Ce(),n=Object(t.useState)(),c=Object(i.a)(n,2)[1];return M()?r.a.createElement("div",{className:a.root},r.a.createElement(ee.a,{position:"static"},r.a.createElement(ae.a,null,r.a.createElement(ne.a,{variant:"h6",className:a.title},"Salamantex Transactions"),r.a.createElement("div",{className:a.menuItems},[{name:"Transactions",link:"/transactions"},{name:"Currency Accounts",link:"/currencyAccounts"},{name:"Account",link:"/account"}].map((function(e,a){return r.a.createElement(p.a,{color:"inherit",component:"a",key:e.name,href:"/me"+e.link},e.name)})),r.a.createElement(p.a,{color:"inherit",onClick:function(){z(),c({})}},"Logout")))),r.a.createElement("div",null,r.a.createElement(L.b,{exact:!0,path:"".concat(e.match.path,"/account"),component:ue}),r.a.createElement(L.b,{exact:!0,path:"".concat(e.match.path,"/currencyAccounts"),component:pe}),r.a.createElement(L.b,{exact:!0,path:"".concat(e.match.path,"/currencyAccounts/add"),component:xe}),r.a.createElement(L.b,{exact:!0,path:"".concat(e.match.path,"/transactions"),component:We}),r.a.createElement(L.b,{exact:!0,path:"".concat(e.match.path,"/transactions/submit"),component:ke}))):r.a.createElement(L.a,{to:"/login"})}var qe=n(88),Be=n.n(qe);function Re(){var e=Object(u.a)([" mutation register($data: RegisterInput!) {\n        register(data: $data) {\n            token,\n            user {\n                id,\n                name\n            }\n        }\n    }"]);return Re=function(){return e},e}var Le=Object(d.a)({root:{marginTop:100},paper:{padding:20},orLoginButton:{textDecoration:"none",color:"#005ff8"}}),Ue=function(){var e=Le();h()(Re());var a,n=b.b(D,a),t=Object(i.a)(n,2),c=t[0],l=t[1];return l.data&&P(l.data.register),r.a.createElement(J,null,r.a.createElement(s.a,{className:e.root,maxWidth:"md"},r.a.createElement(E.a,{container:!0,justify:"center"},r.a.createElement(E.a,{item:!0,md:6},r.a.createElement(g.a,{className:e.paper},r.a.createElement("h3",null,"Register"),r.a.createElement("span",null,"or",r.a.createElement("a",{href:"/login",className:e.orLoginButton}," login")),r.a.createElement(V.c,{onSubmit:function(e){return Be.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Be.a.awrap(c({variables:{data:e}}));case 2:case"end":return a.stop()}}))},initialValues:{name:"",email:"",password:"",maxAmountPerTransactionDollar:0},render:function(e){return r.a.createElement(V.b,null,r.a.createElement(Y,{label:"Name",name:"name",margin:"normal",fullWidth:!0}),r.a.createElement(Y,{label:"E-Mail",name:"email",margin:"normal",type:"email",fullWidth:!0}),r.a.createElement(Y,{label:"Password",name:"password",margin:"normal",type:"password",fullWidth:!0}),r.a.createElement(Y,{label:"Description",name:"description",margin:"normal",fullWidth:!0}),r.a.createElement(Y,{label:"Max amount per transcation ($)",name:"maxAmountPerTransactionDollar",margin:"normal",type:"number",fullWidth:!0}),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(p.a,{variant:"contained",color:"primary",type:"submit"},"Register")))}}))))))},Pe=n(78),Me=function(){var e=Object(t.useState)(),a=Object(i.a)(e,2)[1],n=Object(Pe.useSnackbar)().enqueueSnackbar,c=new o.a({uri:"http://localhost:4000",request:function(e){var a=M();if(a){var n=a.token;e.setContext({headers:{authorization:n||""}})}},onError:function(e){e&&e.graphQLErrors&&(n(e.graphQLErrors[0].message,{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:4e3}),"Not Authorised!"===e.graphQLErrors[0].message&&(z(),a({})))}});return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,{client:c},r.a.createElement(K.a,{theme:Z},r.a.createElement(s.a,null,r.a.createElement(F.a,null,r.a.createElement(L.b,{exact:!0,path:"/login",component:_}),r.a.createElement(L.b,{exact:!0,path:"/register",component:Ue}),r.a.createElement(L.b,{path:"/me",component:De}),r.a.createElement(L.b,{exact:!0,path:"/",render:function(){return r.a.createElement(L.a,{to:"/login"})}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Pe.SnackbarProvider,null,r.a.createElement(Me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[123,1,2]]]);
//# sourceMappingURL=main.94d3befb.chunk.js.map